---
import Layout from "../layouts/LayoutPrivacy.astro";
---

<Layout title="Slider">
  <div class="desktop-container">
    <a href="/"><h1 class="back">+</h1></a>
    <div class="title-container">
      <h1 class="title-container__title">Invertir en <span class="title-container__title--y">oro</span></h1>
      <h2 class="title-container__subtitle">un camino seguro hacia el éxito patrimonial</h2>
  </div>
  <div class="container">
      <div class="slider-wrapper carousel" data-carousel>
          <ul class="slider" data-slides>
              <li class="slide" data-active><img src="../../public/1.jpg" alt="" class="slider__item-container slider__item--1"></li>
              <li class="slide"><img src="../../public/2.jpg" alt="" class="slider__item-container slider__item--2"></li>
              <li class="slide"><img src="../../public/3.jpg" alt="" class="slider__item-container slider__item--3"></li>
              <li class="slide"><img src="../../public/4.jpg" alt="" class="slider__item-container slider__item--4"></li>
              <li class="slide"><img src="../../public/5.jpg" alt="" class="slider__item-container slider__item--5"></li>
              <li class="slide"><img src="../../public/6.jpg" alt="" class="slider__item-container slider__item--6"></li>
              <li class="slide"><img src="../../public/7.jpg" alt="" class="slider__item-container slider__item--7"></li>
              <li class="slide"><img src="../../public/8.jpg" alt="" class="slider__item-container slider__item--8"></li>
              <li class="slide"><img src="../../public/9.jpg" alt="" class="slider__item-container slider__item--9"></li>
              <li class="slide"><img src="../../public/10.jpg" alt="" class="slider__item-container slider__item--10"></li>
              <li class="slide"><img src="../../public/11.jpg" alt="" class="slider__item-container slider__item--11"></li>
              <li class="slide"><img src="../../public/12.jpg" alt="" class="slider__item-container slider__item--12"></li>
              <li class="slide"><img src="../../public/13.jpg" alt="" class="slider__item-container slider__item--13"></li>
              <li class="slide"><img src="../../public/14.jpg" alt="" class="slider__item-container slider__item--14"></li>
              <li class="slide"><img src="../../public/15.jpg" alt="" class="slider__item-container slider__item--15"></li>
              <li class="slide"><img src="../../public/16.jpg" alt="" class="slider__item-container slider__item--16"></li>
              <li class="slide"><img src="../../public/17.jpg" alt="" class="slider__item-container slider__item--17"></li>
              <li class="slide"><img src="../../public/18.jpg" alt="" class="slider__item-container slider__item--18"></li>
              <li class="slide"><img src="../../public/19.jpg" alt="" class="slider__item-container slider__item--19"></li>
              <li class="slide"><img src="../../public/20.jpg" alt="" class="slider__item-container slider__item--20"></li>
              <li class="slide"><img src="../../public/21.jpg" alt="" class="slider__item-container slider__item--21"></li>
          </ul>
          
      </div>
  </div>
  <div class="arrow-container">
      <a class="arrow-container__prev-link carousel-button" data-carousel-button="prev">
          <div class="arrow-container__prev arrow-container__btn">&lt;</div>
      </a>
      <a  class="arrow-container__next-link carousel-button" data-carousel-button="next">
          <div class="arrow-container__next arrow-container__btn">></div>
      </a>
  </div>
  <div class="slider-nav">
      <a class="slider-nav__dots" id="link-1"></a>
      <a class="slider-nav__dots" id="link-2"></a>
      <a class="slider-nav__dots" id="link-3"></a>
      <a class="slider-nav__dots" id="link-4"></a>
      <a class="slider-nav__dots" id="link-5"></a>
      <a class="slider-nav__dots" id="link-6"></a>
      <a class="slider-nav__dots" id="link-7"></a>
      <a class="slider-nav__dots" id="link-8"></a>
      <a class="slider-nav__dots" id="link-9"></a>
      <a class="slider-nav__dots" id="link-10"></a>
      <a class="slider-nav__dots" id="link-11"></a>
      <a class="slider-nav__dots" id="link-12"></a>
      <a class="slider-nav__dots" id="link-13"></a>
      <a class="slider-nav__dots" id="link-14"></a>
      <a class="slider-nav__dots" id="link-15"></a>
      <a class="slider-nav__dots" id="link-16"></a>
      <a class="slider-nav__dots" id="link-17"></a>
      <a class="slider-nav__dots" id="link-18"></a>
      <a class="slider-nav__dots" id="link-19"></a>
      <a class="slider-nav__dots" id="link-20"></a>
      <a class="slider-nav__dots" id="link-21"></a>
  </div>
  </div>
  <div class="mobile-container">
      <a href="/"><h1 class="back m-back">+</h1></a>
      <div class="title-container m-title-container">
        <h1 class="title-container__title m-title-container__title">Invertir en <span class="title-container__title--y">oro</span></h1>
        <h2 class="title-container__subtitle m-title-container__subtitle">un camino seguro hacia el éxito patrimonial</h2>
  </div>
  <div class="m-slider">
    <img src="../../public/1.jpg" alt="" class="m-slider__img" id="img-1">
    <img src="../../public/2.jpg" alt="" class="m-slider__img" id="img-2">
    <img src="../../public/3.jpg" alt="" class="m-slider__img" id="img-3">
    <img src="../../public/4.jpg" alt="" class="m-slider__img" id="img-4">
    <img src="../../public/5.jpg" alt="" class="m-slider__img" id="img-5">
    <img src="../../public/6.jpg" alt="" class="m-slider__img" id="img-6">
    <img src="../../public/7.jpg" alt="" class="m-slider__img" id="img-7">
    <img src="../../public/8.jpg" alt="" class="m-slider__img" id="img-8">
    <img src="../../public/9.jpg" alt="" class="m-slider__img" id="img-9">
    <img src="../../public/10.jpg" alt="" class="m-slider__img" id="img-10">
    <img src="../../public/11.jpg" alt="" class="m-slider__img" id="img-11">
    <img src="../../public/12.jpg" alt="" class="m-slider__img" id="img-12">
    <img src="../../public/13.jpg" alt="" class="m-slider__img" id="img-13">
    <img src="../../public/14.jpg" alt="" class="m-slider__img" id="img-14">
    <img src="../../public/15.jpg" alt="" class="m-slider__img" id="img-15">
    <img src="../../public/16.jpg" alt="" class="m-slider__img" id="img-16">
    <img src="../../public/17.jpg" alt="" class="m-slider__img" id="img-17">
    <img src="../../public/18.jpg" alt="" class="m-slider__img" id="img-18">
    <img src="../../public/19.jpg" alt="" class="m-slider__img" id="img-19">
    <img src="../../public/20.jpg" alt="" class="m-slider__img" id="img-20">
    <img src="../../public/21.jpg" alt="" class="m-slider__img" id="img-21">
  </div>
  <div class="m-nav">
    <a href="#img-1" class="m-nav__link"></a>
    <a href="#img-2" class="m-nav__link"></a>
    <a href="#img-3" class="m-nav__link"></a>
    <a href="#img-4" class="m-nav__link"></a>
    <a href="#img-5" class="m-nav__link"></a>
    <a href="#img-6" class="m-nav__link"></a>
    <a href="#img-7" class="m-nav__link"></a>
    <a href="#img-8" class="m-nav__link"></a>
    <a href="#img-9" class="m-nav__link"></a>
    <a href="#img-10" class="m-nav__link"></a>
    <a href="#img-11" class="m-nav__link"></a>
    <a href="#img-12" class="m-nav__link"></a>
    <a href="#img-13" class="m-nav__link"></a>
    <a href="#img-14" class="m-nav__link"></a>
    <a href="#img-15" class="m-nav__link"></a>
    <a href="#img-16" class="m-nav__link"></a>
    <a href="#img-17" class="m-nav__link"></a>
    <a href="#img-18" class="m-nav__link"></a>
    <a href="#img-19" class="m-nav__link"></a>
    <a href="#img-20" class="m-nav__link"></a>
    <a href="#img-21" class="m-nav__link"></a>
  </div>
</Layout>

<style lang="scss">
    body{
      margin: 0;
      padding: 0;
      height: 100vh;
      overflow-x: hidden;
    }

    a:visited{
      color: #000;
    }

    a{
      color: #000;
    }

    .back{
      position: absolute;
      top: 0px;
      right: 40px;
      font-weight: 500;
      font-size: 60px;
      transform: rotate(45deg);
      transition: all .5s;
      user-select: none;

      &:hover{
        cursor: pointer;
        color: #ffac1a;
      }
    }

    .footer{
      position: absolute;
      bottom: 0px;
    }

    .desktop-container{
      display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-around;
        height: 90vh;
        width: 100vw;
    }

    .mobile-container{
      display: none;
    }

    .title-container{  
      margin-top: 50px;
        text-align: center;

        &__title{
            font-size: 50px;
            font-weight: bold;

            &--y{
                color: #ffac1a;
            }
        }

        &__subtitle{
            font-weight: 500;
        }
    }

    .container{
        padding: 2em;
    }

    .slider-wrapper{
        position: relative;
        max-width: 48rem;
        width: 48rem;
        margin: 0 auto;
    }

    .slider{
        list-style-type: none;
        max-width: 100%;
        display: flex;
        aspect-ratio: 16 / 9;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        box-shadow: 0 1.5rem 3rem -0.75rem hsla(0, 0%, 0%, 0.25);
        border-radius: 0.5rem;

        &__item-container{
            flex: 1 0 100%;
            scroll-snap-align: center;
            object-fit: cover;
            user-select: none;
        }

        &-nav{
            display: flex;
            column-gap: 1rem;
            z-index: 2;

            &__dots{
                width: 10px;
                height: 10px;
                border-radius: 50%;
                border: 1px solid #ffac1a;
                opacity: .7s;
                transition: opacity ease 250ms;
                transition: all .5s;
                cursor: pointer;
            }
        }
    }

    .arrow-container{
        position: absolute;
        display: flex;
        justify-content: space-between;
            column-gap: 1rem;
            position: absolute;
            width: 1000px;
            top: 50%;
            z-index: 2;

        &__btn{
            width: 50px;
            height: 50px;
            font-weight: bold;
            font-size: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            color: #000;
            transition: all .5s;

            &:hover{
                cursor: pointer;
                color: #ffac1a;
            }
        }

        &__next{
            margin-right: 40px;
        }

        &__prev{
            margin-left: 40px;
        }
    }

    @media only screen and (min-width: 1600px){
      .title-container{

        &__title{
          font-size: 70px;
        }

        &__subtitle{
          font-size: 27.5px;
        }
      }

      .slider{

        &-nav{
          position: relative;
          bottom: 60px;
        }
      }
    }

    @media only screen and (max-width: 480px){
      .desktop-container{
        display: none;
      }

      .mobile-container{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      .m-slider{
        margin-top: 50px;
        display: flex;
        max-width: 340px;
        height: 200px;
        width: 100%;
        overflow-x: scroll;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        box-shadow: 0 1.5rem 3rem -0.75rem hsla(0, 0%, 0%, 0.25);
        border-radius: 0.5rem;

        &__img{
          scroll-snap-align: center;
          width: 100%;
          object-fit: cover;
        }
      }

      .m-nav{
        margin-top: 10px;
        display: flex;
            column-gap: 7px;
            z-index: 2;

        &__link{
          width: 10px;
                height: 10px;
                border-radius: 50%;
                border: 1px solid #ffac1a;
                opacity: .7s;
                transition: opacity ease 250ms;
                transition: all .5s;

                &:hover{
                    opacity: 1;
                    cursor: pointer;
                    background-color: #f1bf69;
                }
        }
      }
    }
</style>
<style lang="scss">
.slide {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: 200ms opacity ease-in-out;
  transition-delay: 200ms;
}

.slide > img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
}

.slide[data-active] {
  opacity: 1;
  z-index: 1;
  transition-delay: 0ms;
}
</style>

<script is:inline>
const slideNav = document.querySelector('.slider-nav');
const slides = document.querySelectorAll('.slide');
let currentIndex = 0;

const showSlide = (index) => {
  slides.forEach((slide, i) => {
    if (i === index) {
      slide.dataset.active = true;
    } else {
      delete slide.dataset.active;
    }
  });
  currentIndex = index;
};

slideNav.childNodes.forEach((link, index) => {
  link.addEventListener('click', (evt) => {
    showSlide(index);
  });
});


  // Function to navigate to the previous slide
  const goToPreviousSlide = () => {
    currentIndex = (currentIndex - 1 + slides.length) % slides.length;
    showSlide(currentIndex);
    markNavPoint(currentIndex); // Cambiar el color del enlace en m-nav
  };

  // Function to navigate to the next slide
  const goToNextSlide = () => {
    currentIndex = (currentIndex + 1) % slides.length;
    showSlide(currentIndex);
    markNavPoint(currentIndex); // Cambiar el color del enlace en m-nav
  };

// Add event listeners to the previous and next buttons
document.querySelector('.arrow-container__prev-link').addEventListener('click', goToPreviousSlide);
document.querySelector('.arrow-container__next-link').addEventListener('click', goToNextSlide);

    // Obtenemos todos los enlaces con la clase 'slider-nav__dots'
    const links = document.querySelectorAll(".slider-nav__dots");
  
    // Función para cambiar el color al hacer clic en un enlace
    function changeColorOnClick(event) {
      // Restablecemos el color de todos los enlaces
      links.forEach((link) => {
        link.style.backgroundColor = "";
      });
  
      // Cambiamos el color del enlace que se hizo clic
      event.target.style.backgroundColor = "#ffac1a";
    }
  
    // Agregamos el evento de clic a cada enlace
    links.forEach((link) => {
      link.addEventListener("click", changeColorOnClick);
    });
</script> 

<script is:inline>
  const mNavLinks = document.querySelectorAll('.slider-nav__dots');

  mNavLinks.forEach(element =>{
    element.addEventListener('mouseover', () =>{
      element.style.backgroundColor = '#ffac1a';
    })
    element.addEventListener('mouseleave', () =>{
      element.style.backgroundColor = 'transparent';
    })
  })

  // Función para marcar el punto de navegación correspondiente
  function markNavPoint(index) {
    mNavLinks.forEach((link, i) => {
      if (i === index) {
        link.style.backgroundColor = '#ffac1a'; // Color activo
      } else {
        link.style.backgroundColor = 'transparent'; // Restablece otros puntos a transparente
      }
    });
  }

  slideNav.childNodes.forEach((link, index) => {
    link.addEventListener('click', (evt) => {
      showSlide(index);
      markNavPoint(index); // Cambiar el color del enlace en m-nav
    });
  });

  // Agregamos el evento de clic a cada enlace en m-nav
  mNavLinks.forEach((link, index) => {
    link.addEventListener("click", (event) => {
      showSlide(index);
      markNavPoint(index);
    });
  });
</script>

<script is:inline>
  // Obtén el contenedor del slider móvil
const mobileSliderContainer = document.querySelector('.m-slider');
// Obtén los enlaces en m-nav
const mobileNavLinks = document.querySelectorAll('.m-nav__link');

// Función para verificar si un elemento está en la vista
function isElementInViewport(el) {
  const rect = el.getBoundingClientRect();
  return (
    rect.left >= 0 &&
    rect.right <= window.innerWidth &&
    rect.top >= 0 &&
    rect.bottom <= window.innerHeight
  );
}

// Función para cambiar el color de los enlaces en m-nav
function updateMobileNavLinksColor() {
  mobileNavLinks.forEach((link, index) => {
    const mobileImg = document.getElementById(`img-${index + 1}`);
    if (isElementInViewport(mobileImg)) {
      link.style.backgroundColor = '#ffac1a'; // Enlace en la vista
    } else {
      link.style.backgroundColor = ''; // Restablecer otros enlaces
    }
  });
}

// Agrega un evento de desplazamiento al contenedor del slider móvil
mobileSliderContainer.addEventListener('scroll', () => {
  updateMobileNavLinksColor();
});

// Llama a la función para establecer el color inicial
updateMobileNavLinksColor();

</script>